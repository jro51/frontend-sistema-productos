<div class="container-fluid">
    <div class="admin-title-line">
        <h3 class="text-light">Gestión de Usuarios</h3>
        <button class="btn btn-danger my-2" (click)="openForm()">Añadir Usuario</button>
    </div>

    <div class="row">
        <div class="col-lg-7">
            <table class="table table-dark table-striped table-hover product-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>Email</th>
                        <th>Username</th>
                        <th class="text-center" style="width: 200px;">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @for (usuario of usuarios; track $index) {
                    <tr>
                        <td> {{usuario.id}} </td>
                        <td> {{usuario.nombre}} </td>
                        <td> {{usuario.apellido}} </td>
                        <td> {{usuario.email}} </td>
                        <td> {{usuario.username}} </td>
                        <td class="text-center">
                            <button 
                                class="btn btn-warning btn-sm me-1 my-1"
                                (click)="selectUsuarioEdit(usuario)">Editar</button>
                            <button 
                                class="btn btn-danger btn-sm my-1"
                                (click)="deleteUsuario(usuario.id)">Eliminar</button>
                        </td>
                    </tr>
                    } @empty {
                        <tr>
                            <td colspan="6" class="text-center">No hay usuarios registrados.</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        @if (showForm) {
        <div class="col-lg-5">
            <app-usuario-form 
                [usuario]="selectUsuario" 
                (newUsuarioEventEmitter)="addUsuario($event)"
                (closeFormEventEmitter)="showForm = false"
                (newCloseModalAndReset)="closeModalAndReset()">
            </app-usuario-form>
        </div>
        }
    </div>
</div>